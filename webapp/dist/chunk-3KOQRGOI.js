import{a as h}from"./chunk-GMKUS4PI.js";import{A as I,Na as R,Nb as B,Pb as k,Qb as $,Rb as x,Tb as c,b,c as l,cc as D,m as p,ma as v,na as L,s as C,ua as g,w as f,z as s}from"./chunk-CD5LE2OE.js";import{a,b as u,e as F}from"./chunk-EQDQRRRY.js";var U=[];var d=F(D());var y=(()=>{class i{constructor(){this.currentBreadCrumbItem$=new l({}),this.breadCrumbItems$=new l([]),this.destroy$=new b,this.router=s(c),this.activeRoute=s($),this.initializeRouterSubscription()}getBreadcrumbItems(){return this.breadCrumbItems$.asObservable()}initHomeBreadcrumbItem(t){return this.homeLink=t,{icon:"pi pi-home",routerLink:t||"/",command:()=>this.clear()}}initializeRouterSubscription(){this.router.events.pipe(p(t=>t instanceof k||t instanceof B),C(this.destroy$)).subscribe(t=>{let e=this.getURL(this.router.url);if(e!==this.homeLink&&e!=="/"){let r=this.getDeepsChildData(this.activeRoute);this.isBackNavigation(e)?this.clearLastItem():this.updateBreadcrumb({label:this.getBreadCrumbItemLabel(r),routerLink:e,id:e,command:()=>this.clearLastItems(e)})}})}getURL(t){return t.split("?")[0]}isBackNavigation(t){if(this.router.getCurrentNavigation()?.trigger==="popstate")return this.breadCrumbItems$.value[this.breadCrumbItems$.value.length-2]?.routerLink===t}clearLastItem(){let t=[...this.breadCrumbItems$.value];t.pop(),this.breadCrumbItems$.next(t)}getBreadCrumbItemLabel(t){let e=this.getLabelFromCurrentBreadCrumbItem(this.getURL(this.router.url),t);if(e)return e;let r=t?.snapshot?.data?.labelName;if(r)return r;let o=this.router.url.endsWith("/")?this.getURL(this.router.url)?.slice(0,-1).split("/").pop():this.getURL(this.router.url)?.split("/").pop();if(o)return(0,d.upperFirst)((0,d.camelCase)(o))}getLabelFromCurrentBreadCrumbItem(t,e){let r=this.currentBreadCrumbItem$.value,o=e?.snapshot?.routeConfig?.path;return r.routerLink===decodeURIComponent(t||"")||o===r?.state?.pathConfig?r?.label:void 0}updateBreadcrumb(t){let e=decodeURIComponent(t.routerLink||"");t=u(a({},t),{routerLink:e,id:e});let r=this.breadCrumbItems$.value;if(!r.some(n=>n.routerLink===t?.routerLink))this.breadCrumbItems$.next([...r,t]);else{let n=r.map(m=>m?.routerLink===t?.routerLink&&!m?.custom?u(a({},m),{label:t?.label}):m);this.breadCrumbItems$.next(n)}}setCurrentBreadCrumbItem(t){t=u(a({},t),{routerLink:decodeURIComponent(this.getURL(t?.routerLink)||"")}),this.currentBreadCrumbItem$.next(t)}clearLastItems(t){let e=this.breadCrumbItems$.value,r=e.findIndex(o=>o?.routerLink===decodeURIComponent(t));if(r!==-1){let o=e.slice(0,r+1);this.breadCrumbItems$.next(o)}}getDeepsChildData(t){let e=t;for(;e.firstChild;)e=e.firstChild;return e}clear(){this.breadCrumbItems$.next([])}addItem(t){if(!t)return;t=u(a({},t),{routerLink:decodeURIComponent(t?.routerLink||""),id:decodeURIComponent(t.id||""),custom:!0,command:()=>this.clearLastItems(t?.routerLink)}),this.breadCrumbItems$.value?.some(r=>r?.id===t?.id)||this.breadCrumbItems$.next([...this.breadCrumbItems$.value,t])}deleteItem(t){if(!t)return;let r=this.breadCrumbItems$.value?.filter(o=>o?.id!==decodeURIComponent(t?.id||""));this.breadCrumbItems$.next(r)}ngOnDestroy(){this.destroy$.next(!0)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=f({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var S=(()=>{class i{constructor(){this.breadcrumbService=s(y),this.router=s(c)}onActivate(t){let e=this.router.url,r=t.getBreadcrumbLabel&&t?.getBreadcrumbLabel();this.breadcrumbService.setCurrentBreadCrumbItem({label:r,routerLink:e,state:{pathConfig:t?.activeRoute?.snapshot?.routeConfig?.path}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=I({type:i,selectors:[["ng-component"]],standalone:!0,features:[R],decls:1,vars:0,consts:[[1,"feature",3,"activate"]],template:function(e,r){e&1&&(v(0,"router-outlet",0),g("activate",function(n){return r.onActivate(n)}),L())},dependencies:[x],encapsulation:2})}}return i})();var q=[{path:"",component:S,canActivate:[h],canActivateChild:[h],data:{notReusable:!0},children:[...U,{path:"message",loadChildren:()=>import("./chunk-NRCZKCKO.js").then(i=>i.routes)}]}];export{q as routes};
